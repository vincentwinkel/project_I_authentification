.......FF...........................F

Failures:

  1) Without session Inscription page should print again this page if an error occurred (account already exists)
     Failure/Error: User.should_receive(:save).and_return(false);
       (<User(id: integer, login: string, password: string) (class)>).save(any args)
           expected: 1 time
           received: 0 times
     # ./spec/sauth_spec.rb:73:in `block (3 levels) in <top (required)>'

  2) Without session Inscription page should redirect to the protected area (any error)
     Failure/Error: User.should_receive(:save).and_return(true);
       (<User(id: integer, login: string, password: string) (class)>).save(any args)
           expected: 1 time
           received: 0 times
     # ./spec/sauth_spec.rb:79:in `block (3 levels) in <top (required)>'

  3) With session Add application page Actions from protected area should destroy an app
     Failure/Error: last_response.body.should_not match \
       expected "<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>SAuth | Zone prot&eacute;g&eacute;e</title>\n\t\t<link rel=\"stylesheet\" type=\"text/css\" href=\"http://sauth:4567/style.css\" />\n\t</head>\n\t<body>\n\t\t<center>\n\t\t\t<div id=\"bann\">\n\t\t\t\t<div id=\"bann_content\">\n\t\t\t\t\t<span id=\"logo\">vincentbook</span>\n\t\t\t\t\t<span class=\"logout\">Bienvenue login_test | <a href=\"sessions/destroy\">Deconnexion</a></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<h1>Zone prot&eacute;g&eacute;e</h1>\n\t\t\tService d'authentification\n\t\t\t<div class=\"wrapper\">\n\t\t\t\t<strong>Liste des applications utilisant votre compte :</strong><br />\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<a class=\"app_used\" href=\"http://url1\" target=\"_blank\">app_test1 <span class=\"grey\">(http://url1)</span></a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<a class=\"app_used\" href=\"http://url2\" target=\"_blank\">app_test2 <span class=\"grey\">(http://url2)</span></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"wrapper\">\n\t\t\t\tWebmaster? Vous pouvez <a href=\"/apps/new\">ajouter votre application</a> &agrave; ce service.<br />\n\t\t\t\t<br />\n\t\t\t\t<strong>Liste de vos applications :</strong><br />\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<a class=\"app_admin\" href=\"http://url1\" target=\"_blank\">app_test1 <span class=\"grey\">(http://url1)</span> - appID: 1124</a>\n\t\t\t\t\t<a class=\"item_del\" href=\"/apps/destroy/1124\" title=\"Supprimer l'application\" onclick=\"if (!confirm('Voulez-vous vraiment supprimer l\\'application ?')) return false;\">x</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"help_line\"><div class=\"help_label\">Aide</div></div>\n\t\t\t\tUne fois votre application ajout&eacute;e, le lien &agrave; placer pour se connecter est de la forme :\n\t\t\t\t<div class=\"code\">http://sauth:4567/<strong>appID</strong>/sessions/new?ref=<strong>/chemin</strong></div>\n\t\t\t\t<table class=\"grey\" border=\"0\">\n\t\t\t\t\t<tr><td><strong>appID</strong> </td><td>: identifiant unique g&eacute;n&eacute;r&eacute; pour votre application</td></tr>\n\t\t\t\t\t<tr><td><strong>/chemin</strong> </td><td>: chemin relatif de redirection une fois l'utilisateur connect&eacute;</td></tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</center>\n\t</body>\n</html>\n" not to match /<a class="app_admin" href="http:\/\/url1" target="_blank">app_test1/
     # ./spec/sauth_spec.rb:377:in `block (4 levels) in <top (required)>'

Finished in 0.71693 seconds
37 examples, 3 failures

Failed examples:

rspec ./spec/sauth_spec.rb:71 # Without session Inscription page should print again this page if an error occurred (account already exists)
rspec ./spec/sauth_spec.rb:78 # Without session Inscription page should redirect to the protected area (any error)
rspec ./spec/sauth_spec.rb:370 # With session Add application page Actions from protected area should destroy an app
